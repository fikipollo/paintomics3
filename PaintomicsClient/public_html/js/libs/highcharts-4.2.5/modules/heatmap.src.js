/**
 * @license Highcharts JS v4.2.5 (2016-05-06)
 *
 * (c) 2011-2016 Torstein Honsi
 *
 * License: www.highcharts.com/license
 */
(function(factory){if(typeof module==="object"&&module.exports){module.exports=factory}else{factory(Highcharts)}})(function(Highcharts){var UNDEFINED,Axis=Highcharts.Axis,Chart=Highcharts.Chart,Color=Highcharts.Color,Legend=Highcharts.Legend,LegendSymbolMixin=Highcharts.LegendSymbolMixin,Series=Highcharts.Series,Point=Highcharts.Point,defaultOptions=Highcharts.getOptions(),each=Highcharts.each,extend=Highcharts.extend,extendClass=Highcharts.extendClass,isNumber=Highcharts.isNumber,merge=Highcharts.merge,pick=Highcharts.pick,seriesTypes=Highcharts.seriesTypes,wrap=Highcharts.wrap,noop=function(){};var ColorAxis=Highcharts.ColorAxis=function(){this.isColorAxis=true;this.init.apply(this,arguments)};extend(ColorAxis.prototype,Axis.prototype);extend(ColorAxis.prototype,{defaultColorAxisOptions:{lineWidth:0,minPadding:0,maxPadding:0,gridLineWidth:1,tickPixelInterval:72,startOnTick:true,endOnTick:true,offset:0,marker:{animation:{duration:50},color:"gray",width:.01},labels:{overflow:"justify"},minColor:"#EFEFFF",maxColor:"#003875",tickLength:5},init:function(chart,userOptions){var horiz=chart.options.legend.layout!=="vertical",options;options=merge(this.defaultColorAxisOptions,{side:horiz?2:1,reversed:!horiz},userOptions,{opposite:!horiz,showEmpty:false,title:null,isColor:true});Axis.prototype.init.call(this,chart,options);if(userOptions.dataClasses){this.initDataClasses(userOptions)}this.initStops(userOptions);this.horiz=horiz;this.zoomEnabled=false},tweenColors:function(from,to,pos){var hasAlpha,ret;if(!to.rgba.length||!from.rgba.length){ret=to.input||"none"}else{from=from.rgba;to=to.rgba;hasAlpha=to[3]!==1||from[3]!==1;ret=(hasAlpha?"rgba(":"rgb(")+Math.round(to[0]+(from[0]-to[0])*(1-pos))+","+Math.round(to[1]+(from[1]-to[1])*(1-pos))+","+Math.round(to[2]+(from[2]-to[2])*(1-pos))+(hasAlpha?","+(to[3]+(from[3]-to[3])*(1-pos)):"")+")"}return ret},initDataClasses:function(userOptions){var axis=this,chart=this.chart,dataClasses,colorCounter=0,options=this.options,len=userOptions.dataClasses.length;this.dataClasses=dataClasses=[];this.legendItems=[];each(userOptions.dataClasses,function(dataClass,i){var colors;dataClass=merge(dataClass);dataClasses.push(dataClass);if(!dataClass.color){if(options.dataClassColor==="category"){colors=chart.options.colors;dataClass.color=colors[colorCounter++];if(colorCounter===colors.length){colorCounter=0}}else{dataClass.color=axis.tweenColors(Color(options.minColor),Color(options.maxColor),len<2?.5:i/(len-1))}}})},initStops:function(userOptions){this.stops=userOptions.stops||[[0,this.options.minColor],[1,this.options.maxColor]];each(this.stops,function(stop){stop.color=Color(stop[1])})},setOptions:function(userOptions){Axis.prototype.setOptions.call(this,userOptions);this.options.crosshair=this.options.marker;this.coll="colorAxis"},setAxisSize:function(){var symbol=this.legendSymbol,chart=this.chart,x,y,width,height;if(symbol){this.left=x=symbol.attr("x");this.top=y=symbol.attr("y");this.width=width=symbol.attr("width");this.height=height=symbol.attr("height");this.right=chart.chartWidth-x-width;this.bottom=chart.chartHeight-y-height;this.len=this.horiz?width:height;this.pos=this.horiz?x:y}},toColor:function(value,point){var pos,stops=this.stops,from,to,color,dataClasses=this.dataClasses,dataClass,i;if(dataClasses){i=dataClasses.length;while(i--){dataClass=dataClasses[i];from=dataClass.from;to=dataClass.to;if((from===UNDEFINED||value>=from)&&(to===UNDEFINED||value<=to)){color=dataClass.color;if(point){point.dataClass=i}break}}}else{if(this.isLog){value=this.val2lin(value)}pos=1-(this.max-value)/(this.max-this.min||1);i=stops.length;while(i--){if(pos>stops[i][0]){break}}from=stops[i]||stops[i+1];to=stops[i+1]||from;pos=1-(to[0]-pos)/(to[0]-from[0]||1);color=this.tweenColors(from.color,to.color,pos)}return color},getOffset:function(){var group=this.legendGroup,sideOffset=this.chart.axisOffset[this.side];if(group){this.axisParent=group;Axis.prototype.getOffset.call(this);if(!this.added){this.added=true;this.labelLeft=0;this.labelRight=this.width}this.chart.axisOffset[this.side]=sideOffset}},setLegendColor:function(){var grad,horiz=this.horiz,options=this.options,reversed=this.reversed,one=reversed?1:0,zero=reversed?0:1;grad=horiz?[one,0,zero,0]:[0,zero,0,one];this.legendColor={linearGradient:{x1:grad[0],y1:grad[1],x2:grad[2],y2:grad[3]},stops:options.stops||[[0,options.minColor],[1,options.maxColor]]}},drawLegendSymbol:function(legend,item){var padding=legend.padding,legendOptions=legend.options,horiz=this.horiz,width=pick(legendOptions.symbolWidth,horiz?200:12),height=pick(legendOptions.symbolHeight,horiz?12:200),labelPadding=pick(legendOptions.labelPadding,horiz?16:30),itemDistance=pick(legendOptions.itemDistance,10);this.setLegendColor();item.legendSymbol=this.chart.renderer.rect(0,legend.baseline-11,width,height).attr({zIndex:1}).add(item.legendGroup);this.legendItemWidth=width+padding+(horiz?itemDistance:labelPadding);this.legendItemHeight=height+padding+(horiz?labelPadding:0)},setState:noop,visible:true,setVisible:noop,getSeriesExtremes:function(){var series;if(this.series.length){series=this.series[0];this.dataMin=series.valueMin;this.dataMax=series.valueMax}},drawCrosshair:function(e,point){var plotX=point&&point.plotX,plotY=point&&point.plotY,crossPos,axisPos=this.pos,axisLen=this.len;if(point){crossPos=this.toPixels(point[point.series.colorKey]);if(crossPos<axisPos){crossPos=axisPos-2}else if(crossPos>axisPos+axisLen){crossPos=axisPos+axisLen+2}point.plotX=crossPos;point.plotY=this.len-crossPos;Axis.prototype.drawCrosshair.call(this,e,point);point.plotX=plotX;point.plotY=plotY;if(this.cross){this.cross.attr({fill:this.crosshair.color}).add(this.legendGroup)}}},getPlotLinePath:function(a,b,c,d,pos){return isNumber(pos)?this.horiz?["M",pos-4,this.top-6,"L",pos+4,this.top-6,pos,this.top,"Z"]:["M",this.left,pos,"L",this.left-6,pos+6,this.left-6,pos-6,"Z"]:Axis.prototype.getPlotLinePath.call(this,a,b,c,d)},update:function(newOptions,redraw){var chart=this.chart,legend=chart.legend;each(this.series,function(series){series.isDirtyData=true});if(newOptions.dataClasses&&legend.allItems){each(legend.allItems,function(item){if(item.isDataClass){item.legendGroup.destroy()}});chart.isDirtyLegend=true}chart.options[this.coll]=merge(this.userOptions,newOptions);Axis.prototype.update.call(this,newOptions,redraw);if(this.legendItem){this.setLegendColor();legend.colorizeItem(this,true)}},getDataClassLegendSymbols:function(){var axis=this,chart=this.chart,legendItems=this.legendItems,legendOptions=chart.options.legend,valueDecimals=legendOptions.valueDecimals,valueSuffix=legendOptions.valueSuffix||"",name;if(!legendItems.length){each(this.dataClasses,function(dataClass,i){var vis=true,from=dataClass.from,to=dataClass.to;name="";if(from===UNDEFINED){name="< "}else if(to===UNDEFINED){name="> "}if(from!==UNDEFINED){name+=Highcharts.numberFormat(from,valueDecimals)+valueSuffix}if(from!==UNDEFINED&&to!==UNDEFINED){name+=" - "}if(to!==UNDEFINED){name+=Highcharts.numberFormat(to,valueDecimals)+valueSuffix}legendItems.push(extend({chart:chart,name:name,options:{},drawLegendSymbol:LegendSymbolMixin.drawRectangle,visible:true,setState:noop,isDataClass:true,setVisible:function(){vis=this.visible=!vis;each(axis.series,function(series){each(series.points,function(point){if(point.dataClass===i){point.setVisible(vis)}})});chart.legend.colorizeItem(this,vis)}},dataClass))})}return legendItems},name:""});each(["fill","stroke"],function(prop){Highcharts.Fx.prototype[prop+"Setter"]=function(){this.elem.attr(prop,ColorAxis.prototype.tweenColors(Color(this.start),Color(this.end),this.pos))}});wrap(Chart.prototype,"getAxes",function(proceed){var options=this.options,colorAxisOptions=options.colorAxis;proceed.call(this);this.colorAxis=[];if(colorAxisOptions){new ColorAxis(this,colorAxisOptions)}});wrap(Legend.prototype,"getAllItems",function(proceed){var allItems=[],colorAxis=this.chart.colorAxis[0];if(colorAxis){if(colorAxis.options.dataClasses){allItems=allItems.concat(colorAxis.getDataClassLegendSymbols())}else{allItems.push(colorAxis)}each(colorAxis.series,function(series){series.options.showInLegend=false})}return allItems.concat(proceed.call(this))});var colorPointMixin={setVisible:function(vis){var point=this,method=vis?"show":"hide";each(["graphic","dataLabel"],function(key){if(point[key]){point[key][method]()}})}};var colorSeriesMixin={pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color",dashstyle:"dashStyle"},pointArrayMap:["value"],axisTypes:["xAxis","yAxis","colorAxis"],optionalAxis:"colorAxis",trackerGroups:["group","markerGroup","dataLabelsGroup"],getSymbol:noop,parallelArrays:["x","y","value"],colorKey:"value",translateColors:function(){var series=this,nullColor=this.options.nullColor,colorAxis=this.colorAxis,colorKey=this.colorKey;each(this.data,function(point){var value=point[colorKey],color;color=point.options.color||(value===null?nullColor:colorAxis&&value!==undefined?colorAxis.toColor(value,point):point.color||series.color);if(color){point.color=color}})}};defaultOptions.plotOptions.heatmap=merge(defaultOptions.plotOptions.scatter,{animation:false,borderWidth:0,nullColor:"#F8F8F8",dataLabels:{formatter:function(){return this.point.value},inside:true,verticalAlign:"middle",crop:false,overflow:false,padding:0},marker:null,pointRange:null,tooltip:{pointFormat:"{point.x}, {point.y}: {point.value}<br/>"},states:{normal:{animation:true},hover:{halo:false,brightness:.2}}});seriesTypes.heatmap=extendClass(seriesTypes.scatter,merge(colorSeriesMixin,{type:"heatmap",pointArrayMap:["y","value"],hasPointSpecificOptions:true,pointClass:extendClass(Point,colorPointMixin),supportsDrilldown:true,getExtremesFromAll:true,directTouch:true,init:function(){var options;seriesTypes.scatter.prototype.init.apply(this,arguments);options=this.options;options.pointRange=pick(options.pointRange,options.colsize||1);this.yAxis.axisPointRange=options.rowsize||1},translate:function(){var series=this,options=series.options,xAxis=series.xAxis,yAxis=series.yAxis,between=function(x,a,b){return Math.min(Math.max(a,x),b)};series.generatePoints();each(series.points,function(point){var xPad=(options.colsize||1)/2,yPad=(options.rowsize||1)/2,x1=between(Math.round(xAxis.len-xAxis.translate(point.x-xPad,0,1,0,1)),-xAxis.len,2*xAxis.len),x2=between(Math.round(xAxis.len-xAxis.translate(point.x+xPad,0,1,0,1)),-xAxis.len,2*xAxis.len),y1=between(Math.round(yAxis.translate(point.y-yPad,0,1,0,1)),-yAxis.len,2*yAxis.len),y2=between(Math.round(yAxis.translate(point.y+yPad,0,1,0,1)),-yAxis.len,2*yAxis.len);point.plotX=point.clientX=(x1+x2)/2;point.plotY=(y1+y2)/2;point.shapeType="rect";point.shapeArgs={x:Math.min(x1,x2),y:Math.min(y1,y2),width:Math.abs(x2-x1),height:Math.abs(y2-y1)}});series.translateColors();if(this.chart.hasRendered){each(series.points,function(point){point.shapeArgs.fill=point.options.color||point.color})}},drawPoints:seriesTypes.column.prototype.drawPoints,animate:noop,getBox:noop,drawLegendSymbol:LegendSymbolMixin.drawRectangle,alignDataLabel:seriesTypes.column.prototype.alignDataLabel,getExtremes:function(){Series.prototype.getExtremes.call(this,this.valueData);this.valueMin=this.dataMin;this.valueMax=this.dataMax;Series.prototype.getExtremes.call(this)}}))});